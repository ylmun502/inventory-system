<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.Textfield?>

<VBox xmlns="http://javafx.com/javafx/13"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.daidaisuki.inventory.controller.view.CustomersController"
      spacing="10">

    <padding>
        <Insets top="20" bottom="20" left="20" right="20"/>
    </padding>

    <Label text="Customers" styleClass="page-title"/>

    <HBox styleClass="toolbar">  
        <Button fx:id="addButton" text="Add" styleClass="primary" onAction="#handleAdd"/>
        <Button fx:id="editButton" text="Edit" styleClass="secondary" onAction="#handleEdit"/>
        <Button fx:id="deleteButton" text="Delete" styleClass="danger" onAction="#handleDelete"/>
        <Region HBox.hgrow="ALWAYS"/>
        <TextField fx:id="searchField" promptText="Search customer..." prefWidth="200"/> 
    </HBox>

    <SplitPane orientation="VERTICAL" dividerPosition="0.5" VBox.vgrow="ALWAYS">
        <items>
            
            <VBox spacing="10">            
                <TableView fx:id="table" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="fullNameCol" text="Name" prefWidth="200"/>
                        <TableColumn fx:id="totalSpentCol" text="Total Spent" prefWidth="200"/>
                        <TableColumn fx:id="acquisitionSourceCol" text="Source" prefWidth="200"/>
                        <TableColumn fx:id="lastOrderDateCol" text="Last Order Date" prefWidth="200"/>
                    </columns>
                </TableView>
            </VBox>

            <VBox spacing="15" styleClass="detail-section">

                <padding>
                    <Insets top="15" bottom="15" left="15" right="15"/>
                </padding>

                <VBox spacing="8" styleClass="header">
                    <HBox alignment="CENTER_LEFT">
                        <Label fx:id="fullNameLabel" text="Select a Customer" styleClass="dialog-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="acquisitionSourceLabel" styleClass="small-muted"/>
                    </HBox>
                    <HBox spacing="25">
                        <Label fx:id="emailLabel" text="Email: --" styleClass="small-muted"/>
                        <Label fx:id="phoneNumberLabel" text="Phone: --" styleClass="small-muted"/>
                    </HBox>
                    <Label fx:id="addressLabel" text="Address: --" styleClass="small-muted"/>
                </VBox>
                
                <GridPane hgap="30" styleClass="metric-grid">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="25"/>
                        <ColumnConstraints percentWidth="25"/>
                        <ColumnConstraints percentWidth="25"/>
                        <ColumnConstraints percentWidth="25"/>
                    </columnConstraints>
                    <VBox GridPane.columnIndex="0" alignment="CENTER">
                        <Label text="Total Orders" styleClass="metric-label"/>
                        <Label fx:id="totalOrdersLabel" text="0" styleClass="metric-value"/>
                    </VBox>
                    <VBox GridPane.columnIndex="1" alignment="CENTER" styleClass="metric-divider">
                        <Label text="Total Spent" styleClass="metric-label"/>
                        <Label fx:id="totalSpentLabel" text="0.00" styleClass="metric-value"/>
                    </VBox>
                    <VBox GridPane.columnIndex="2" alignment="CENTER" styleClass="metric-divider">
                        <Label text="Average Order Value" styleClass="metric-label"/>
                        <Label fx:id="averageOrderValueLabel" text="$0.00" styleClass="metric-value"/>
                    </VBox>
                    <VBox GridPane.columnIndex="3" alignment="CENTER" styleClass="metric-divider">
                        <Label text="Total Discount" styleClass="metric-label"/>
                        <Label fx:id="totalDiscountLabel" text="$0.00" styleClass="metric-value"/>
                    </VBox>
                </GridPane>

                <VBox spacing="8" VBox.vgrow="ALWAYS">
                    <Label text="Order History" styleClass="section-title"/>
                    <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS">
                        <placeholder>
                            <Label text="No orders found for this customer."/>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="orderIdCol" text="Order ID" prefWidth="100"/>
                            <TableColumn fx:id="orderDateCol" text="Date" prefWidth="150"/>
                            <TableColumn fx:id="orderStatusCol" text="Status" prefWidth="120"/>
                            <TableColumn fx:id="orderTotalCol" text="Total" prefWidth="120"/>
                        </columns>
                    </TableView>
                </VBox>

                <HBox spacing="20" style="-fx-padding: 5 0 0 0;">
                    <Label fx:id="createdAtLabel" text="Created: --" styleClass="small-muted"/>
                    <Label fx:id="updatedAtLabel" text="Updated: --" styleClass="small-muted"/>
                    <Region HBox.hgrow="ALWAYS" />
                    <Button text="Export History" styleClass="secondary"/>
                </HBox>
            </VBox>

        </items>
    </SplitPane>

</VBox>
